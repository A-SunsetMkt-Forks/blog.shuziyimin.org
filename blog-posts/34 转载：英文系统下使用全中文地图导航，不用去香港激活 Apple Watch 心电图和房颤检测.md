# 34 转载：英文系统下使用全中文地图导航，不用去香港激活 Apple Watch 心电图和房颤检测

**本文转载自[果核 Apple Nuts](https://mp.weixin.qq.com/s/xOjQXMULyIEmH8rqu5E6cw)，已获授权，除排版改动以适应博客展示，文章未进行任何修改。**

# 英文系统下使用全中文地图和导航

从 iOS 11.2 和 macOS 10.13.2 开始，Apple 为系统大量增加汉化。可能对于部分新用户来说是好事，因为很多功能看起来更加接地气和本土化，而且从 0 开始适应汉化不会觉得非常违和。

但是对于很多老用户来说，很多功能的汉化让我对原有的功能感到混淆和困惑，总找不到想要的功能，例如经常搞混“辅助功能”和“辅助触控”，再例如 隔空投送、调度中心、访达、实况照片、程序坞、雷雳接口等等汉化都让我摸不到头脑，不能第一时间反应过来。于是索性把系统语言修改为英文，感觉非常舒服。

但是遇到一个问题就是，英文系统环境下，Apple 自带的地图不能使用中文导航或显示中文搜索结果。很多朋友可能不喜欢使用百度地图、高德地图、腾讯地图等，认为太臃肿太难用，但是英文系统环境下，地图的导航和显示搜索结果还是英文的，感觉又不太好用。iOS 13 又偏偏没有为 地图 应用提供单独选择语言，于是很多朋友很纠结。今天这篇教程，我就给大家带来解决方案。

## 工作原理
iOS 系统的权限十分封闭，在未越狱的情况下，用户很难直接修改系统配置文件的参数。但是我们忽略了一个特殊的渠道，备份与恢复。

使用 Finder 或第三方工具对设备进行备份的过程中，设备中的 App 存档、系统配置都会被拷贝到计算机上，并通过特殊的归档方式存储在本地计算机上。和 iOS 系统不同的是，设备数据的备份文件没有过于严格的加密保护和恢复验证，可以被轻易读取和修改，并可以通过 Finder 或第三方工具传输回设备。通过这种方式就可以轻松地对设备的部分参数进行修改。

这个教程诞生的灵感源自于在 iOS 13 早期测试版中，iOS 允许为健康 App 单独设置语言，我第一时间将健康 App 设置成了中文，因为很多专业术语我看不懂也懒得查。但是在后续的测试版中，Apple 又移除了这个功能，可是我的健康 App 却一直保持在中文。这就让我想到，一定是健康 App 的配置文件在控制它显示的语言。

## 准备工作
**操作系统**
- Windows
- macOS

**所需软件**
- [iMazing](https://imazing.com/zh)
- plist Editor Pro [Windows 版本](https://www.icopybot.com/plist-editor.htm)｜ [macOS 版本](https://www.fatcatsoftware.com/plisteditpro/)

**我能不能使用 记事本 / 写字板 / 其他文本编辑器呢？**
不能。我们需要修改的是 plist 文件，这个文件默认是以二进制形式存储的，直接使用文本编辑器打开会出现乱码或文本内容混乱的情况。我们需要使用特殊的 plist 编辑器对配置文件进行编辑。

## 让 Apple Maps 变为全中文环境，并实现中文导航

使用数据线连接设备至计算机，并运行 iMazing，确认设备被正确识别后，看软件右侧功能栏，点击“备份”按钮。
	![](https://cdn.shuziyimin.org/blog-51-1.jpeg)


iMazing 会询问一些备份的偏好设置，唯一需要注意的地方就是请**务必确保**您已经开启了**加密备份**（如果钥匙图标右侧变为圆点变为绿色则表示成功启用），因为这样备份出来的数据是完整的。否则你会丢失健康数据、Wi-Fi 密码等隐私信息。
	![](https://cdn.shuziyimin.org/blog-51-2.jpeg)

点击右下角的备份按钮，开始漫长的数据备份过程，速度快慢取决于你手机的数据量。请尽量确保此过程中计算机不要休眠，数据线稳定连接。
![](https://cdn.shuziyimin.org/blog-51-3.jpeg)
完成备份后，点击程序右上方的 “设备名称 的备份”按钮，点击刚刚完成的备份，点击“编辑”按钮。
	![](https://cdn.shuziyimin.org/blog-51-4.jpeg)
iMazing 为了确保备份数据的安全，会要求你在编辑备份文件前创建备份的副本，并在这个副本基础上编辑。你可以在文本框内随意编辑一个副本备份的名字，然后点击“继续”。iMazing 会花费一段时间拷贝并创建副本。
	![](https://cdn.shuziyimin.org/blog-51-5.jpeg)
完成副本创建后，可以在程序左侧一栏看到多出来一份可编辑的备份副本。点击选中，然后在右侧点击“文件系统”。等待片刻 iMazing 需要加载备份文件系统列表。完成加载后，依次选择路径 `Apps` \> `AppDomain-com.apple.Maps` \>`Library` \> `Preferences`，找到 `com.apple.Maps.plist`文件，把这个文件拖到桌面，或点击下方的复制到 Mac / Windows。
	![](https://cdn.shuziyimin.org/blog-51-6.jpeg)

使用之前提及的工具 `PlistEdit Pro` 或 `plist Editor Pro` 打开这个 plist 文件。点击 `Root` 一栏，然后点击窗口上方的 “New Child” 按钮添加子节点，并命名为 `AppleLanguages`，随后将右侧的 Class 属性改为 `Array`。
	![](https://cdn.shuziyimin.org/blog-51-7.jpeg)

选中刚刚创建好的 Array 类型的 AppleLanguages 子节点，继续点击 “New Child” 按钮。从**最上至最下**按照**最首要至最次要**的语言偏好输入。例如我首选是简体中文，那么编号 0 的项目，Value 就设置为 `zh-Hans`，如果是繁体中文，那就可以设置为 `zh-Hant`。全部完成后，类似下图所示（根据您个人语言偏好，可能与图片稍有出入）。如果不知道对应的语言标志如何书写，请参考 [RFC 4646 《Tags for Identifying Languages》标准](https://www.ietf.org/rfc/rfc4646.txt) 。常用的一些标志如下：
- zh-Hans 简体中文
- zh-Hant 繁体中文
- en-US 美式英语
	![](https://cdn.shuziyimin.org/blog-51-8.jpeg)
修改完成后保存文件。将文件拖拽回 iMazing 的原路径下并替换原文件。至此，替换工作完成。点击 iMazing 左侧的刚刚编辑好的备份，选择右侧功能栏的“恢复至设备”。选择待恢复备份的设备后，按照软件引导完成数据恢复，这个过程的长短取决于备份的数据量，请耐心等待数据恢复结束。
	![](https://cdn.shuziyimin.org/blog-51-9.jpeg)
完成恢复后，再次运行地图，可以发现系统自带的地图已经完全变成了中文，地点搜索结果也是全中文的。**注意：如果你希望语音导航的语言也是中文，需要将系统设置中 Siri 的语言修改为中文。**


## 方法拓展
这个方法通杀系统 App，因为这利用了 iOS 13 系统的新特性——单独为 App 设置语言。iOS 13 会在运行 App 的瞬间检查语言偏好设置（AppleLanguages），检查用户是否单独为这个 App 分配了特殊语言，如果是，则会寻找对应的本地化语言。
例如你认为健康 App 存在很多专业术语晦涩难懂，那么可以用上文提及的同样方法修改 `com.apple.Health.plist`。这个方法还可以被 Finder / iCloud 备份，在下次还原系统时依然保留这一特性，非常实用。

# 不用去香港，就能激活 Apple Watch 心电图(ECG)和房颤(A-Fib)检测
![](https://cdn.shuziyimin.org/blog-52-11.png)
很多人麻烦朋友代购 Apple Watch 后，拿回大陆发现没法使用心电图（ECG）功能。手动激活的时候会提示你所在的区域不提供相关服务。这时候很多朋友会有一种手表白买了的感觉，大费周章找人代购结果最实用的功能却用不上。今天，我也给这个问题带来了解决方案。原理与上文类似，后文会详细解释。

**注意：**
1. **你的 Apple Watch 必须要在 ECG 功能开通的国家或地区购买（如：香港、美国等）。**
2. **确保你的 iPhone 健康 App 中有数据记录，不限记录种类。 一般多少都会有记录，如：步数。只要不是空白的就行。**
3. 关于房颤检测(A-fib)功能是否能成功激活，个人没有条件做大量实验验证，因为我早已经开启相关功能。请各位尝试后给我反馈，但是替换配置文件绝对不会损坏您的设备，请放心操作。


## 工作原理
Apple Watch 激活 ECG 功能需要借助手机的验证，iPhone 会通过判断当前 SIM 卡的服务区域和当前定位的实际位置判断是否允许 Apple Watch 激活 ECG 功能。如果 iOS 认为用户符合激活条件，iOS 系统会向 Health App 的配置文件中创建两个标记，分别为`HKAtrialFibrillationDetectionOnboardingCompleted` 和`HKElectrocardiogramOnboardingCompleted` 表示 ECG 已经激活。如果你在 iCloud 开启了健康同步，这份配置文件最终会被备份至云端，跟随着你的 Apple ID。因此通过修改 iPhone 的配置文件也可以达成激活的效果。但是当你重置手机或删除 iCloud 健康记录后，这个功能也会随之失效，需要重新操作。

## 准备工作

在上文的教程中，地图的配置文件包含较多隐私信息，而且每人的语言偏好不同，因此没法给出统一的方案。

但在这个教程中，激活的参数是一样的，不会因人而异。因此，为了避免大家错误修改配置，我已经将激活的 plist 打包，上传至我的私人服务器，下载 [Hackl0us-ECG\_A-fib.zip](https://hackl0us.d.pr/hamVWl) （转载备注：数字移民也复制了此文件，提供[备用下载](https://cdn.shuziyimin.org/Hackl0us-ECG_Af.zip)。）

## 修改配置文件激活 ECG 和 Af
因为工作原理与 Apple Maps 的语言修改大同小异，因此这里的步骤会有大部分步骤重复上一教程操作。
- 取消 Apple Watch 和当前 iPhone 的配对。若您不知道如何取消配对，请参考 Apple 官方教程 《[取消配对并抹掉 Apple Watch》](https://support.apple.com/zh-cn/HT204568)，此步骤会擦除您 Apple Watch 的所有数据。
- 对 iPhone 进行一次完整的**加密**的数据备份，请重复上文教程的步骤 1 - 5。如果您刚刚已经进行过此操作，直接使用刚刚编辑过的备份即可，无需重新备份。
- 参考上文教程步骤 6，进入备份的 `文件系统` \> `HomeDomain` \> `Library` \> `Preferences` 文件夹下，将刚刚下载压缩包解压。将你希望对应开启功能所对应的配置文件拷贝并替换至备份文件中。

例如，如果你希望只开启 ECG，那么就将 ECG 文件夹下的 `com.apple.private.health.heart-rhythm.plist` 拷贝并替换到 Preferences 下。

参考上文教程步骤 9，还原你的 iPhone 数据。

iPhone 重启后，重新配对你的 Apple Watch。为确保成功激活，建议**不要**恢复 Apple Watch 的旧备份数据，而是设置为全新的 Apple Watch。

Apple Watch 配对后，ECG App 会自动安装。如果您发现该 App 一直没有完成安装，可以尝试重新启动 Apple Watch。如果依然无法解决问题，请重新配对 iPhone 和 Apple Watch，问题即可解决。

# 结束语

通过修改 iOS 的数据备份可以十分巧妙地实现很多功能或达到很多目的，不仅仅限于今天提及的两个用途。

早在 iOS 4.3.x 时代，就可以通过修改备份文件中， `/Library/Preferences/com.apple.SpringBoard.plist` 来开启 iPad 的隐藏多任务手势功能。

现在，你也可以通过修改备份文件来实现改写 App 的存档、运动 App 中的获得的徽章、清理移除备份中的垃圾数据等等。

希望今天的文章可以抛砖引玉，给予大家更多的灵感。

---- 

文章由 Hackl0us 原创，版权归 Hackl0us 所有。
未经本人授权不允许以任何形式传播、抄袭、二次编辑、转载。
作者：Hackl0us
部分图片来源：Apple (侵删)